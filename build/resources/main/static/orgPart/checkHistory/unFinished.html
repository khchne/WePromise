<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>待完成的服务列表</title>

    <link href="../../jquery/bootstrap_3.3.0/css/bootstrap.min.css" type="text/css" rel="stylesheet"/>
    <link href="../../jquery/bootstrap-datetimepicker-master/css/bootstrap-datetimepicker.min.css" type="text/css"
          rel="stylesheet"/>

    <script type="text/javascript" src="../../jquery/jquery-1.11.1-min.js"></script>
    <script type="text/javascript" src="../../jquery/bootstrap_3.3.0/js/bootstrap.min.js"></script>
    <script type="text/javascript"
            src="../../jquery/bootstrap-datetimepicker-master/js/bootstrap-datetimepicker.js"></script>
    <script type="text/javascript"
            src="../../jquery/bootstrap-datetimepicker-master/locale/bootstrap-datetimepicker.zh-CN.js"></script>

    <script src="https://kit.fontawesome.com/ced7379929.js" crossorigin="anonymous"></script>
    <script>

        $(function () {
            // alert("未完成服务历史记录页面加载完毕")
            show();
        })


        function show() {
            $.ajax({
                url: "/wepromise/org/showAppliedService.do",
                data: {
                    "state": "已接受"
                },
                dataType: "json",
                success: function (data) {
                    var html = "";
                    $.each(data, function (index, ele) {
                        html += '<tr class="active">';
                        html += '<td>' + ele.startTime + '</td>';
                        html += '<td>' + ele.id.slice(16) + '</td>';
                        html += '<td>' + ele.service + '</td>';
                        html += '<td>' + ele.state + '</td>';
                        html += '<td>' + ele.chargeName + '</td>';
                        html += '<td>';
                        html += '<button onclick="confirmFinish(\'' + ele.id + '\')" type="button" data-toggle="modal" data-target="#describe">确认完成</button>';
                        html += '</td>';
                        html += '</tr>';
                    })
                    $("#nFinishedBody").html(html);
                }
            })
        }

        function confirmFinish(id) {
            // alert(id);
            $.ajax({
                url: "/wepromise/org/confirmFinish.do",
                data: {
                    "id": id,
                    "state": "已完成"
                },
                success: function () {
                    alert("确认成功");
                    show();
                }
            })
        }
    </script>

<body>
<div class="modal fade" id="describe" role="dialog">
    <div class="modal-dialog" role="document" style="width: 85%;">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">×</span>
                </button>
                <h4 class="modal-title" id="myModalLabel1">确认完成</h4>
            </div>
            <div class="modal-body">

                <form class="form-horizontal" role="form">
                    <div class="form-group" style="left:20px;position:relative">
                        <div class="col-sm-10" style="width: 81%;top:10px">
                            <span style="font-size:30px;font-weight:30px">任务是否已完成</span>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-primary" data-dismiss="modal">确认</button>
                        <button type="submit" class="btn btn-primary" data-dismiss="modal">关闭</button>
                    </div>
                </form>

            </div>

        </div>
    </div>
</div>
<!--标题-->
<div>
    <div style="position: relative; left: 10px; top: -10px;">
        <div class="page-header">
            <i class="fas fa-spinner fa-spin fa-3x"></i>
            <span style="font-size:40px;font-weight:40px">待完成的任务列表</span>
            <button style="position:relative;left:700px" onclick="location='../Inipage1.html'"><span
                    style="font-size:20px">返回组织首页</span></button>
        </div>
    </div>
</div>

<!--记录列表-->
<div style="position:relative;top:10px">
    <table class="table table-hover" style="text-align:center">
        <thead>
        <tr style="color: #B3B3B3;">
            <td>预约时间</td>
            <td>用户ID</td>
            <td>服务类型</td>
            <td>状态</td>
            <td>负责人</td>
            <td></td>
        </tr>
        </thead>
        <tbody id="nFinishedBody">
        <tr class="active">
            <td>2021-10-1</td>
            <td>1111</td>
            <td>生活照料</td>
            <td>等待用户反馈</td>
            <td>hejirong</td>
            <td></td>
        </tr>
        <tr class="active">
            <td>2021-10-7</td>
            <td>1112</td>
            <td>法律维权</td>
            <td>正在执行</td>
            <td>gt</td>
            <td>
                <button type="button" data-target="#describe" data-toggle="modal">确认已完成</button>
            </td>
        </tr>
        <tr class="active">
            <td>2021-10-11</td>
            <td>11</td>
            <td>法律维权</td>
            <td>待完成</td>
            <td>gt</td>
            <td>
                <button type="button" data-target="#describe" data-toggle="modal">确认已完成</button>
            </td>
        </tr>
        <tr class="active">
            <td>2021-10-20</td>
            <td>1112</td>
            <td>康复治疗</td>
            <td>待完成</td>
            <td>zy</td>
            <td>
                <button type="button" data-target="#describe" data-toggle="modal">确认已完成</button>
            </td>
        </tr>
        <tr class="active">
            <td>2021-11-5</td>
            <td>1112</td>
            <td>康复治疗</td>
            <td>待完成</td>
            <td>ckh</td>
            <td>
                <button type="button" data-target="#describe" data-toggle="modal">确认已完成</button>
            </td>
        </tr>
        </tbody>
    </table>
</div>

<!--记录翻页-->
<div style="height: 50px; position: relative;top: 30px;">
    <div>
        <button type="button" class="btn btn-default" style="cursor: default;">共<b>50</b>条记录</button>
    </div>
    <div class="btn-group" style="position: relative;top: -34px; left: 110px;">
        <button type="button" class="btn btn-default" style="cursor: default;">显示</button>
        <div class="btn-group">
            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                10
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" role="menu">
                <li><a href="#">20</a></li>
                <li><a href="#">30</a></li>
            </ul>
        </div>
        <button type="button" class="btn btn-default" style="cursor: default;">条/页</button>
    </div>
    <div style="position: relative;top: -88px; left: 285px;">
        <nav>
            <ul class="pagination">
                <li class="disabled"><a href="#">首页</a></li>
                <li class="disabled"><a href="#">上一页</a></li>
                <li class="active"><a href="#">1</a></li>
                <li><a href="#">2</a></li>
                <li><a href="#">3</a></li>
                <li><a href="#">4</a></li>
                <li><a href="#">5</a></li>
                <li><a href="#">下一页</a></li>
                <li class="disabled"><a href="#">末页</a></li>
            </ul>
        </nav>
    </div>
</div>

</body>

