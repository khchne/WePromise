<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>已完成的服务列表</title>

    <link href="../../jquery/bootstrap_3.3.0/css/bootstrap.min.css" type="text/css" rel="stylesheet"/>
    <link href="../../jquery/bootstrap-datetimepicker-master/css/bootstrap-datetimepicker.min.css" type="text/css"
          rel="stylesheet"/>

    <script type="text/javascript" src="../../jquery/jquery-1.11.1-min.js"></script>
    <script type="text/javascript" src="../../jquery/bootstrap_3.3.0/js/bootstrap.min.js"></script>
    <script type="text/javascript"
            src="../../jquery/bootstrap-datetimepicker-master/js/bootstrap-datetimepicker.js"></script>
    <script type="text/javascript"
            src="../../jquery/bootstrap-datetimepicker-master/locale/bootstrap-datetimepicker.zh-CN.js"></script>

    <script src="https://kit.fontawesome.com/ced7379929.js" crossorigin="anonymous"></script>
    <style>
        .rating {
            unicode-bidi: bidi-override;
            direction: rtl;
        }

        .rating > span {
            display: inline-block;
            position: relative;
            width: 1.1em;
        }

        .rating > span:hover:before,
        .rating > span:hover ~ span:before {
            content: "\2605";
            position: absolute;
        }
    </style>
    <script>
        $(function () {
            $.ajax({
                url: "/wepromise/org/showAppliedService.do",
                data: {
                    "state": "已完成"
                },
                dataType: "json",
                success: function (data) {
                    var html = "";
                    $.each(data, function (index, ele) {
                        html += '<tr class="active">';
                        html += '<td>' + ele.startTime + '</td>';
                        html += '<td>' + ele.id + '</td>';
                        html += '<td>' + ele.service + '</td>';
                        html += '<td>' + ele.chargeName + '</td>';
                        html += '<td>';
                        html += '<button onclick="detail(\'' + ele.id + '\')" type="button" data-toggle="modal" data-target="#describe">详情</button>';
                        html += '</td>';
                        html += '</tr>';
                    })
                    $("#finishedBody").html(html);
                }
            })
        })

        function detail(id) {
            $.ajax({
                url: "wepromise/org/selectServiceDetail",
                data: {
                    "id": id
                },
                dataType: "json",
                success: function (data) {
                    $("#his-service").val(data.service);
                    $("#his-userId").val(data.id);
                    $("#time").val(data.endTime - data.startTime);
                    $("#address").val(data.serAddress);
                    $("#comm").val(data.comment);
                }
            })

        }
    </script>
</head>
<body>
<div class="modal fade" id="describe" role="dialog">
    <div class="modal-dialog" role="document" style="width: 85%;">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">×</span>
                </button>
                <h4 class="modal-title" id="myModalLabel1">服务详情</h4>
            </div>
            <div class="modal-body">

                <form class="form-horizontal" role="form">

                    <div class="form-group">
                        <label for="his-service" class="col-sm-2 control-label">服务类型<span
                                style="font-size: 15px; color: red;"></span></label>
                        <div class="col-sm-10" style="width: 300px;">
                            <div class="form-control" id="his-service">生活照料服务</div>
                        </div>
                        <label for="his-userId" class="col-sm-2 control-label">用户ID<span
                                style="font-size: 15px; color: red;"></span></label>
                        <div class="col-sm-10" style="width: 300px;">
                            <div class="form-control" id="his-userId">3221</div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="time" class="col-sm-2 control-label">服务持续时间<span
                                style="font-size: 15px; color: red;"></span></label>
                        <div class="col-sm-10" style="width: 300px;">
                            <div class="form-control" id="time">2小时</div>
                        </div>
                        <label for="address" class="col-sm-2 control-label">服务地址<span
                                style="font-size: 15px; color: red;"></span></label>
                        <div class="col-sm-10" style="width: 300px;">
                            <!--								<input type="text" id="create-marketActivityOwner" class="form-control" disabled="disabled" value="2020-10-10">-->
                            <div class="form-control" id="address">深圳大学</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="create-grade" class="col-sm-2 control-label" style="180px">用户对服务的打分为</label>
                        <div class="col-sm-10" style="width: 200px;">
                            <div class="rating" id="create-grade" style="font-size:30px;left:-20px">
                                <span>☆</span><span>☆</span><span>☆</span><span>☆</span><span>☆</span>
                            </div>
                        </div>
                    </div>
                    <div class="form-group" style="left:20px;position:relative">
                        <h4 class="modal-title" id="myModalLabel2"><b>用户对本次服务的评价为</b></h4>
                        <div class="col-sm-10" style="width: 81%;top:10px">
								<textarea class="form-control" rows="5" id="comm">
                                    服务很好！！爱了爱了....
                                </textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-primary" data-dismiss="modal">确认</button>
                    </div>
                </form>

            </div>

        </div>
    </div>
</div>
<!--标题-->
<div>
    <div style="position: relative; left: 10px; top: -10px;">
        <div class="page-header">
            <i class="fas fa-american-sign-language-interpreting fa-3x"></i>
            <span style="font-size:40px;font-weight:40px">已完成的任务列表</span>
            <button style="position:relative;left:700px" onclick="location='../Inipage1.html'"><span
                    style="font-size:20px">返回组织首页</span></button>
        </div>
    </div>
</div>

<!--记录列表-->
<div style="position:relative;top:10px">
    <table class="table table-hover" style="text-align:center">
        <thead>
        <tr style="color: #B3B3B3;">
            <td>提供服务的时间</td>
            <td>用户ID</td>
            <td>服务类型</td>
            <td>负责人</td>
            <td></td>
        </tr>
        </thead>
        <tbody id="finishedBody">
        <tr class="active">
            <td>2021-10-1</td>
            <td>1111</td>
            <td>生活照料</td>
            <td>hejirong</td>
            <td>
                <button type="button" data-toggle="modal" data-target="#describe">详情</button>
            </td>
        </tr>
        <tr class="active">
            <td>2021-10-7</td>
            <td>1112</td>
            <td>法律维权</td>
            <td>gt</td>
            <td>
                <button type="button" data-target="#describe" data-toggle="modal">详情</button>
            </td>
        </tr>
        <tr class="active">
            <td>2021-10-11</td>
            <td>11</td>
            <td>法律维权</td>
            <td>gt</td>
            <td>
                <button type="button" data-target="#describe" data-toggle="modal">详情</button>
            </td>
        </tr>
        <tr class="active">
            <td>2021-10-20</td>
            <td>1112</td>
            <td>康复治疗</td>
            <td>zy</td>
            <td>
                <button type="button" data-target="#describe" data-toggle="modal">详情</button>
            </td>
        </tr>
        <tr class="active">
            <td>2021-11-5</td>
            <td>1112</td>
            <td>康复治疗</td>
            <td>ckh</td>
            <td>
                <button type="button" data-target="#describe" data-toggle="modal">详情</button>
            </td>
        </tr>
        </tbody>
    </table>
</div>

<!--记录翻页-->
<div style="height: 50px; position: relative;top: 30px;">
    <div>
        <button type="button" class="btn btn-default" style="cursor: default;">共<b>50</b>条记录</button>
    </div>
    <div class="btn-group" style="position: relative;top: -34px; left: 110px;">
        <button type="button" class="btn btn-default" style="cursor: default;">显示</button>
        <div class="btn-group">
            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                10
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" role="menu">
                <li><a href="#">20</a></li>
                <li><a href="#">30</a></li>
            </ul>
        </div>
        <button type="button" class="btn btn-default" style="cursor: default;">条/页</button>
    </div>
    <div style="position: relative;top: -88px; left: 285px;">
        <nav>
            <ul class="pagination">
                <li class="disabled"><a href="#">首页</a></li>
                <li class="disabled"><a href="#">上一页</a></li>
                <li class="active"><a href="#">1</a></li>
                <li><a href="#">2</a></li>
                <li><a href="#">3</a></li>
                <li><a href="#">4</a></li>
                <li><a href="#">5</a></li>
                <li><a href="#">下一页</a></li>
                <li class="disabled"><a href="#">末页</a></li>
            </ul>
        </nav>
    </div>
</div>

</body>

